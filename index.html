<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Convo â€” Admin Tools Stable</title>
  <style>
  /* ğŸ”¹ Î•Ï†Î±ÏÎ¼ÏŒÎ¶ÎµÏ„Î±Î¹ Ï€ÏÎ¹Î½ Ï†Î¿ÏÏ„ÏÏƒÎµÎ¹ Ï„Î¿ ÎºÏÏÎ¹Î¿ CSS */
  #topbar {
    display: flex;
    align-items: center;
    justify-content: center;   /* ÎºÏÎ±Ï„Î¬ Ï„Î¿ logo ÏƒÏ„Î¿ ÎºÎ­Î½Ï„ÏÎ¿ Î±Ï€ÏŒ Ï„Î¿ Ï€ÏÏÏ„Î¿ frame */
  }
  body.chat-active #topbar {
    justify-content: space-between; /* ÎµÏ€Î±Î½Î±Ï†Î¿ÏÎ¬ Î¼ÎµÏ„Î¬ Ï„Î¿ login */
  }
</style>

  <link rel="stylesheet" href="./styles.css" />
  <link rel="icon" type="image/png" href="./favicon.png" />
<!-- ===================== PRELOAD FIX ===================== -->
<script>
  // âœ… Î‘Ï€ÏŒÎ»Ï…Ï„Î· ÏƒÏ„Î±Î¸ÎµÏÏŒÏ„Î·Ï„Î± ÏƒÏ„Î¿ logo ÎºÎ±Ï„Î¬ Ï„Î¿ Ï€ÏÏÏ„Î¿ load
  document.addEventListener("DOMContentLoaded", () => {
    // Î ÏÎ¿ÎµÏ„Î¿Î¹Î¼Î¬Î¶Î¿Ï…Î¼Îµ Ï„Î¿ ÏƒÏÎ¼Î± ÏƒÎµ "auth-active" ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï€ÏÎ¹Î½ Ï†Î¿ÏÏ„ÏÏƒÎ¿Ï…Î½ Ï„Î± scripts
    if (!document.body.classList.contains("chat-active")) {
      document.body.classList.add("auth-active");
    }
  });
</script>

</head>
<body class="auth-active">

  <!-- ===================== TOPBAR ===================== -->
  <header id="topbar">
    <div class="brand">
      <span class="logo">ğŸ’¬</span>
      <span class="title">Convo</span>
    </div>

    <div class="top-actions">
      <!-- Admin & System -->
<button id="youtubeBtn" class="icon-btn" title="YouTube Panel">ğŸµ</button>
      <button id="systemBtn" class="hidden icon-btn" title="System Logs">âš¡</button>
          <!-- âœï¸ Rename Logs button (Î¼ÏŒÎ½Î¿ Î³Î¹Î± MysteryMan) -->
<button id="renameBtn" class="hidden icon-btn" title="Rename Logs">âœï¸</button>
<button id="adminMenuBtn" class="icon-btn hidden" title="Admin Menu">âš™ï¸</button>
<!-- ğŸ†” UID Panel button (Î¼ÏŒÎ½Î¿ Î³Î¹Î± MysteryMan) -->
<button id="uidBtn" class="hidden icon-btn" title="UID Panel">ğŸ†”</button>

      <button id="userManagerBtn" class="icon-btn hidden" title="User Manager">ğŸ‘¥</button>
   <button id="profileBtn" class="icon-btn hidden" title="Profile">ğŸ§‘</button>
<!-- ğŸ’¬ DM Notifications -->
<button id="dmNotifBtn" class="icon-btn hidden" title="Private Messages">
  ğŸ’¬
  <span id="dmNotifDot" class="notif-dot hidden"></span>
</button>
<!-- ğŸ«‚ Friend Requests -->
<button id="friendReqBtn" class="icon-btn hidden" title="Friend Requests">
  ğŸ«‚
  <span id="friendReqDot" class="notif-dot hidden"></span>
</button>
<!-- ğŸ·ï¸ Mentions -->
<!-- ğŸ·ï¸ Mentions -->
<button id="mentionsBtn" class="icon-btn" title="Mentions Panel">
  ğŸ’ 
  <span id="mentionsDot" class="notif-dot hidden"></span>
</button>


      <button id="logoutBtn" class="hidden">Logout</button>
    </div>
  </header>

  <!-- ===================== AUTH CONTAINER ===================== -->
  <main id="authContainer">
    <h2>Welcome to Convo</h2>
    <p class="muted">Create an account or log in to continue.</p>

    <div class="auth-grid">
      <!-- ==== REGISTER ==== -->
      <section class="auth-section">
        <h3>Create Account</h3>
        <div class="grid-2x2">
          <input type="text" id="registerUsername" placeholder="Username" />
          <input type="email" id="registerEmail" placeholder="Email" />
          <input type="password" id="registerPassword" placeholder="Password" />
          <button id="registerBtn" class="btn">Register</button>
        </div>
      </section>

      <!-- ==== LOGIN ==== -->
      <section class="auth-section">
        <h3>Login</h3>
        <div class="grid-2x2">
          <input type="email" id="loginEmail" placeholder="Email" />
          <input type="password" id="loginPassword" placeholder="Password" />
          <button id="loginBtn" class="btn">Login</button>
          <button id="guestBtn" class="btn ghost">Continue as Guest</button>
        </div>
      </section>
    </div>
  </main>

  <!-- ===================== ROOMS PANEL ===================== -->
  <aside id="roomsPanel" class="panel left hidden">
    
    <div class="rooms-controls">
      <button id="createRoomBtn" class="btn small">â• New Room</button>
      <button id="deleteRoomBtn" class="btn small danger">ğŸ—‘ Delete Room</button>
    </div>
    <ul id="roomsList" class="rooms-list"></ul>
  </aside>
  <button id="roomsToggleBtn" class="panel-toggle hidden">â˜°</button>

  <!-- ===================== USERS PANEL ===================== -->
  <aside id="usersPanel" class="panel right hidden">
    
    <ul id="usersList" class="list"></ul>
  </aside>
  <button id="usersToggleBtn" class="panel-toggle right hidden">ğŸ‘¥</button>

 <!-- ===================== CHAT CONTAINER ===================== -->
<main id="chatContainer" class="hidden">
    <!-- ğŸ’¬ PRIVATE CHAT TABS BAR -->
<div id="privateTabsBar" class="private-tabs-bar hidden">

    <!-- Î¤Î± tabs Î¸Î± Î¼Ï€Î±Î¯Î½Î¿Ï…Î½ Î´Ï…Î½Î±Î¼Î¹ÎºÎ¬ ÎµÎ´Ï -->
  </div>
  <!-- ğŸ’¬ DM Action Bar -->
<div id="dmActionBar" class="hidden dm-action-bar">
  <button class="dm-btn" id="ignoreBtn" title="Ignore User">ğŸš« Ignore</button>
  <button class="dm-btn" id="muteBtn" title="Mute User">ğŸ”• Mute</button>
  <button class="dm-btn" id="clearBtn" title="Clear Chat">ğŸ—‘ï¸ Clear</button>
  <button class="dm-btn" id="closeDmBtn" title="Close DM">âŒ Close</button>
</div>


  <section id="messages" class="scroll-area">
    <div class="empty-hint">ğŸ‘‹ ÎšÎ±Î»Ï‰ÏƒÎ®ÏÎ¸ÎµÏ‚! Î£Ï„ÎµÎ¯Î»Îµ Ï„Î¿ Ï€ÏÏÏ„Î¿ ÏƒÎ¿Ï… Î¼Î®Î½Ï…Î¼Î±.</div>
  </section>
<!-- ğŸ“¨ ÎÎ­Î± ÎœÎ·Î½ÏÎ¼Î±Ï„Î± Î•Î¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ· -->
<div id="newMessageAlert" class="hidden new-msg-alert">â¬‡ï¸ ÎˆÏ‡ÎµÏ„Îµ Î½Î­Î± Î¼Î·Î½ÏÎ¼Î±Ï„Î±</div>

  <!-- ğŸ’« Emoji / GIF / Sticker Panel (Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ input bar) -->
  <div id="emojiPanel" class="emoji-panel hidden">
 <!-- === ÎšÏÏÎ¹Î± Tabs (Emoji | GIFs | Stickers) === -->
<div class="emoji-main-tabs">
  <button class="main-tab-btn active" data-tab="emoji">ğŸ˜Š Emoji</button>
  <button class="main-tab-btn" data-tab="gifs">ğŸï¸ GIFs</button>
  <button class="main-tab-btn" data-tab="stickers">ğŸ’« Stickers</button>
</div>

<!-- === Î¥Ï€Î¿ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ (ÎµÎ¼Ï†Î±Î½Î¯Î¶Î¿Î½Ï„Î±Î¹ Î¼ÏŒÎ½Î¿ ÏŒÏ„Î±Î½ ÎµÎ¯Î½Î±Î¹ ÎµÎ½ÎµÏÎ³ÏŒ Ï„Î¿ Emoji tab) === -->
<div class="emoji-sub-tabs" id="emojiSubTabs">
  <button class="sub-tab-btn active" data-cat="smileys">ğŸ˜€ Smileys</button>
  <button class="sub-tab-btn" data-cat="animals">ğŸ¶ Animals</button>
  <button class="sub-tab-btn" data-cat="food">ğŸ• Food</button>
  <button class="sub-tab-btn" data-cat="activities">âš½ Activities</button>
  <button class="sub-tab-btn" data-cat="symbols">â¤ï¸ Symbols</button>
</div>

    <div class="emoji-content">
      <!-- Emoji grid -->
      <div id="emojiTab" class="tab-content active">
  <div class="emoji-grid"></div>
</div>


      <!-- GIFs grid -->
      <div id="gifsTab" class="tab-content">
        <input type="text" class="giphy-search" placeholder="ğŸ” Search GIFs..." />
        <div class="gif-grid"></div>
      </div>

      <!-- Stickers grid -->
      <div id="stickersTab" class="tab-content">
        <input type="text" class="giphy-search" placeholder="ğŸ” Search Stickers..." />
        <div class="sticker-grid"></div>
      </div>
    </div>
  </div>

  <!-- ğŸ’¬ Input Bar -->
  <form id="messageForm" class="inputbar" autocomplete="off">
    <button type="button" id="emojiBtn" class="icon-btn" title="Emoji">ğŸ˜Š</button>
    <textarea id="messageInput" rows="1" placeholder="Î“ÏÎ¬ÏˆÎµ Î­Î½Î± Î¼Î®Î½Ï…Î¼Î±â€¦"></textarea>
    <button type="submit" id="sendBtn" class="btn">Send</button>
  </form>
</main>

<!-- ====== ADMIN CONTEXT MENU ====== -->
<div id="adminContextMenu" class="context-menu hidden">
  <div class="menu-item" data-action="delete">ğŸ—‘ï¸ Delete Message</div>
  
</div>


  <!-- ===================== SYSTEM LOGS MODAL ===================== -->
  <div id="systemModal" class="hidden modal-overlay">
    <div class="modal-box">
      <div class="modal-header">
        <h3>ğŸ§  System Logs</h3>
        <button id="clearLogsBtn" class="btn danger small">Clear</button>
        <button id="closeSystemBtn" class="icon-btn">âœ–</button>
      </div>
      <div class="modal-content">
        <div id="systemLogsFilter"></div>
        <div id="systemLogsList"></div>
      </div>
    </div>
  </div>

    <!-- ===================== CONVO BUBBLE ===================== -->
  <div id="convoBubbleOverlay" class="hidden">
    <div id="convoBubble" class="bubble-box">
      <div class="bubble-header">
        <span class="bubble-title">Convo Alert</span>
        <button id="bubbleCloseBtn" class="bubble-close">âœ–</button>
      </div>
      <div class="bubble-content" id="bubbleContent">...</div>
      <div class="bubble-actions">
        <button id="bubbleOkBtn" class="btn small">OK</button>
      </div>
    </div>
  </div>
  <!-- ===================== RENAME LOGS MODAL ===================== -->
  <div id="renameModal" class="hidden modal-overlay">
    <div class="modal-box">
      <div class="modal-header">
        <h3>âœï¸ Rename Logs</h3>
        <button id="closeRenameBtn" class="icon-btn">âœ–</button>
      </div>
      <div class="modal-content">
        <div id="renameLogsList" class="logs-list scroll-area"></div>
      </div>
    </div>
  </div>

  <!-- ===================== BANNED USERS MODAL ===================== -->
<div id="bannedModal" class="hidden modal-overlay">
  <div class="modal-box">
    <div class="modal-header">
      <h3>ğŸš« Banned Users</h3>
      <button id="closeBannedBtn" class="icon-btn">âœ–</button>
    </div>
    <div class="modal-content">
      <div id="bannedUsersList" class="banned-list"></div>
    </div>
  </div>
</div>

<!-- ===================== MUTED USERS MODAL ===================== -->
<div id="mutedModal" class="hidden modal-overlay">
  <div class="modal-box">
    <div class="modal-header">
      <h3>ğŸ”ˆ Muted Users</h3>
      <button id="closeMutedBtn" class="icon-btn">âœ–</button>
    </div>
    <div class="modal-content">
      <div id="mutedUsersList" class="banned-list"></div>
    </div>
  </div>
</div>

<!-- ===================== FRIEND REQUESTS PANEL ===================== -->
<div id="friendReqPanel" class="hidden modal-overlay">
  <div class="modal-box">
    <div class="modal-header">
      <h3>ğŸ«‚ Friend Requests</h3>
      <button id="closeFriendReqBtn" class="icon-btn">âœ–</button>
    </div>
    <div class="modal-content">
      <div id="friendReqList" class="scroll-area">
        <p class="muted">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±Î¹Ï„Î®Î¼Î±Ï„Î± Ï†Î¹Î»Î¯Î±Ï‚.</p>
      </div>
    </div>
  </div>
</div>

<!-- ===================== YOUTUBE PANEL ===================== -->
<div id="youtubePanel" class="hidden youtube-panel">
  <div class="youtube-header">
    <span>ğŸ¬ YouTube Player</span>
    <button id="closeYoutubeBtn" class="icon-btn">âœ–</button>
  </div>
  <div id="youtubeContent" class="youtube-content">
    <p class="muted">ğŸµ ÎšÎ±Î½Î­Î½Î± Î²Î¯Î½Ï„ÎµÎ¿ â€“ ÏƒÏ„ÎµÎ¯Î»Îµ Î­Î½Î± YouTube link ÏƒÏ„Î¿ chat!</p>
  </div>
</div>
<!-- ===================== MENTIONS DROPDOWN ===================== -->
<div id="mentionsPanel" class="hidden mentions-dropdown">
  <div class="mentions-header">
    <span>ğŸ·ï¸ Mentions</span>
    <button id="closeMentionsBtn" class="icon-btn small">âœ–</button>
  </div>
  <div id="mentionsList" class="mentions-list scroll-area">
    <p class="muted">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ mentions Î±ÎºÏŒÎ¼Î±.</p>
  </div>
</div>

<!-- ===================== USER MANAGER PANEL ===================== -->
<div id="userManagerModal" class="hidden">
  <div class="modal-box wide">
    <div class="modal-header">
      <h3>âš™ï¸ User Manager</h3>
      <div class="modal-actions">
        <button id="clearGuestsBtn2" class="btn small">ğŸ§¹ Clear Guests</button>
        <button id="clearChatBtn2" class="btn small danger">ğŸ—‘ï¸ Clear Chat</button>
        <button id="refreshUsersBtn" class="btn small">ğŸ” Refresh</button>
        <button id="closeUserManagerBtn" class="icon-btn">â</button>
      </div>
    </div>

    <!-- âœ… Scroll container Î³Î¹Î± Ï„Î¿ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ -->
    <div class="user-list-container">
      <div class="modal-content">
        <!-- Tabs -->
        <div id="userTabs" class="tabs">
          <button data-tab="all" class="tab-btn active">All Users</button>
          <button data-tab="admins" class="tab-btn">Admins (0)</button>
          <button data-tab="vips" class="tab-btn">VIPs (0)</button>
          <button data-tab="guests" class="tab-btn">Guests (0)</button>
          <button data-tab="banned" class="tab-btn">Banned (0)</button>
          <button data-tab="muted" class="tab-btn">Muted (0)</button>
        </div>

        <!-- Search -->
        <input id="userSearch" type="text" placeholder="ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Ï‡ÏÎ®ÏƒÏ„Î· Î® ÏÏŒÎ»Î¿Ï…..." class="search-bar" />

        <!-- User List -->
        <div id="userManagerList" class="user-list scroll-area"></div>
      </div>
    </div>
  </div>
</div>
<!-- ===================== UID PANEL (Admin-only) ===================== -->
<div id="uidPanel" class="hidden uid-panel">
  <div class="uid-header">
    <h3>ğŸ†” UID List</h3>
    <button id="closeUidBtn" class="icon-btn">âœ–</button>
  </div>
  <div id="uidList" class="uid-list scroll-area">
    <p class="muted">(loading...)</p>
  </div>
</div>


<!-- ===================== SCRIPTS ===================== -->
<script type="module" src="./firebaseInit.js"></script>
<script type="module" src="./currentUser.js"></script>  <!-- âœ… ÎœÎµÏ„Î±Ï†Î­ÏÎ¸Î·ÎºÎµ Ï€Î¬Î½Ï‰ -->
<script type="module" src="./roomsPanel.js"></script>
<script type="module" src="./app.js"></script>
<script type="module" src="./youtube.js"></script>
<script type="module" src="./chatMessages.js"></script>
<script type="module" src="./userManager.js"></script>
<script type="module" src="./renameLogs.js"></script>
<script type="module" src="./uidPanel.js"></script>
<script type="module" src="./profileModal.js"></script>
<script type="module" src="./privateTabs.js"></script>
<script type="module" src="./dmNotifier.js"></script>
<script src="pulseReactions.js"></script>
<script type="module" src="./mentionsPanel.js"></script>
<script type="module">
  import { loadMentionsPanel } from "./mentionsPanel.js";

  document.addEventListener("DOMContentLoaded", () => {
    const mentionsBtn = document.getElementById("mentionsBtn");
    const mentionsPanel = document.getElementById("mentionsPanel");
    const closeMentionsBtn = document.getElementById("closeMentionsBtn");

    mentionsBtn.classList.remove("hidden");

    mentionsBtn.addEventListener("click", () => {
      mentionsPanel.classList.remove("hidden");
      loadMentionsPanel(); // ğŸ”¥ Ï†ÏŒÏÏ„Ï‰ÏƒÎµ Ï„Î± mentions ÏŒÏ„Î±Î½ Î±Î½Î¿Î¯Î³ÎµÎ¹
    });

    closeMentionsBtn.addEventListener("click", () => {
      mentionsPanel.classList.add("hidden");
    });

    mentionsPanel.addEventListener("click", (e) => {
      if (e.target === mentionsPanel) {
        mentionsPanel.classList.add("hidden");
      }
    });
  });
</script>

</body>
</html>
